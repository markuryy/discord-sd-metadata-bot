# Discord Bot for Stable Diffusion Prompt Reader

This is a Discord bot that analyzes image metadata generated by various Stable Diffusion tools. It is based on the [Stable Diffusion Prompt Reader](https://github.com/receyuki/stable-diffusion-prompt-reader) project by [receyuki](https://github.com/receyuki).

## Features

- Analyzes image metadata from various Stable Diffusion tools, including A1111 webUI, Easy Diffusion, InvokeAI, NovelAI, ComfyUI, Draw Things, StableSwarmUI, and Fooocus.
- Allows administrators to bind the bot to a specific text channel.
- Reacts with a magnifying glass emoji (üîç) to images with recognized metadata.
- Sends a direct message to users who react with the magnifying glass emoji, providing the image metadata, including the prompt, negative prompt, settings, and parameters.
- Supports multi-image messages and includes image index and total count in the metadata.
- Implements a cooldown mechanism to prevent spamming of reactions.

## Prerequisites

- Python 3.7 or higher
- `discord` library

## Installation

1. Clone this repository or download the source code.

2. Install the required `discord` library using pip:
   ```
   pip install discord
   ```

3. Rename the `discord_bot.example.py` file to `discord_bot.py`.

4. Open the `discord_bot.py` file and replace `'YOUR_BOT_TOKEN'` with your actual Discord bot token.

## Usage

1. Run the `discord_bot.py` script:
   ```
   python discord_bot.py
   ```

2. The bot will log in and display a message indicating that it's ready. Press Ctrl+C to stop the bot.

3. In your Discord server, use the `!bind` command in a text channel to bind the bot to that channel. Only administrators can use this command.

4. When an image with recognized metadata is posted in the bound channel, the bot will react with a magnifying glass emoji (üîç).

5. Users can react to the image with the magnifying glass emoji to receive a direct message containing the image metadata, including the prompt, negative prompt, settings, and parameters.

6. To unbind the bot from a channel, use the `!unbind` command in the bound channel. Only administrators can use this command.

## Configuration

- The bot prefix is set to `!`. You can change it by modifying the `command_prefix` parameter in the `discord_bot.py` file.

- The cooldown duration for reactions is set to 5 minutes. You can adjust it by modifying the `timedelta(minutes=5)` line in the `discord_bot.py` file.

## Contributing

Contributions are welcome! If you find any issues or have suggestions for improvements, please open an issue or submit a pull request.

## License

This project is licensed under the [MIT License](LICENSE).

## Acknowledgements

- [receyuki](https://github.com/receyuki) for creating the [Stable Diffusion Prompt Reader](https://github.com/receyuki/stable-diffusion-prompt-reader) project.
- The developers of the various Stable Diffusion tools supported by this bot.

## Contact

If you have any questions or need further assistance, please feel free to contact the project maintainer.
